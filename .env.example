# =============================================================================
# Authentik Docker Compose Environment Configuration
# =============================================================================
# Copy this file to .env and update the values with your own secure values.
#
# SECURITY WARNING:
# - Never commit .env to version control
# - Use strong, unique passwords and secret keys
# - Generate secrets using: openssl rand -base64 60 | tr -d '\n'
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
# Database name
PG_DB=authentik

# Database user (create a dedicated user, don't use 'postgres')
PG_USER=authentik

# Database password (GENERATE A STRONG PASSWORD)
# Generate with: openssl rand -base64 36 | tr -d '\n'
PG_PASS=CHANGE_ME_GENERATE_SECURE_PASSWORD

# -----------------------------------------------------------------------------
# Authentik Security Configuration
# -----------------------------------------------------------------------------
# Secret key used for cryptographic signing (GENERATE A STRONG SECRET)
# Generate with: openssl rand -base64 60 | tr -d '\n'
# IMPORTANT: Keep this secret! Losing it will require resetting all sessions/tokens.
AUTHENTIK_SECRET_KEY=CHANGE_ME_GENERATE_SECURE_SECRET_KEY

# -----------------------------------------------------------------------------
# Network Port Configuration
# -----------------------------------------------------------------------------
# HTTP port (default: 9000)
COMPOSE_PORT_HTTP=9000

# HTTPS port (default: 9443)
# Only needed if not using a reverse proxy
COMPOSE_PORT_HTTPS=9443

# Docker network subnet (optional, for custom network configuration)
# DOCKER_SUBNET=172.20.0.0/24

# -----------------------------------------------------------------------------
# Email Configuration (Recommended for production)
# -----------------------------------------------------------------------------
# Email server settings
AUTHENTIK_EMAIL__HOST=smtp.example.com
AUTHENTIK_EMAIL__PORT=587
AUTHENTIK_EMAIL__USE_TLS=true
AUTHENTIK_EMAIL__FROM=authentik@example.com
AUTHENTIK_EMAIL__USERNAME=smtp_user
AUTHENTIK_EMAIL__PASSWORD=smtp_password

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Log level: debug, info, warning, error
AUTHENTIK_LOG_LEVEL=info

# Disable startup analytics (recommended for production)
AUTHENTIK_DISABLE_STARTUP_ANALYTICS=true

# Disable update check (set to true for production air-gapped environments)
AUTHENTIK_DISABLE_UPDATE_CHECK=false

# Enable error reporting to help improve Authentik (set to false for production)
AUTHENTIK_ERROR_REPORTING_ENABLED=false

# Allow users to change their display name
AUTHENTIK_DEFAULT_USER_CHANGE_NAME=true

# -----------------------------------------------------------------------------
# Image Version Configuration
# -----------------------------------------------------------------------------
# Authentik version (pin to specific version for production)
# Check https://github.com/goauthentik/authentik/releases for latest version
AUTHENTIK_TAG=2025.10.3

# Custom image registry (optional)
# AUTHENTIK_IMAGE=ghcr.io/goauthentik/server

# =============================================================================
# Optional: GeoIP Configuration
# =============================================================================
# To enable GeoIP features, download MaxMind GeoIP databases:
# https://dev.maxmind.com/geoip/geolite2-free-geolocation-data
#
# Place the .mmdb files in the ./geoip directory
# AUTHENTIK_AUTHENTIK__GEOIP=/geoip/GeoLite2-City.mmdb
